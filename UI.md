# 微信聊天助手 - 前端UI与流程设计

## 一、AI问答区界面交互和流程描述

### 1. 主要功能区布局（以 "AI" 选项卡为核心）

- **类别栏**：在AI编辑框上方、选项卡下方，横向展示四个类别按钮：
  - 咨询中
  - 已成交
  - 已结束
  - 退款中

- **客户昵称列表弹窗**：点击某个类别后，助手左侧弹出该类别下所有客户昵称列表
  - 列表顶部有模糊搜索框，支持快速筛选客户昵称
  - 列表支持滚动、显示大量客户

- **聊天记录展示区**：点击某个昵称后，自动检索并展示与该客户的全部历史聊天记录（按会话或时间分组）

- **AI编辑区**：原有AI问题输入框，右侧显示当前选中的客户昵称和类别
  - 用户输入问题后，助手自动将当前客户的所有历史聊天记录作为上下文，和问题一起发给AI
  - AI回复结果展示在下方建议区，可支持多条建议、追问、上下文跟进

- **建议/回复区**：显示AI的回复，自动拆分为多条建议卡片，支持单击/双击快速操作

---

### 2. 典型操作流程

1. 用户进入AI选项卡界面
2. 在类别栏点击如“咨询中”，助手左侧弹出此类别下客户昵称列表
3. 用户可在模糊搜索框输入关键字，筛选客户昵称
4. 点击某个客户昵称，助手自动检索该客户全部聊天记录（历史+实时）
5. 用户输入问题内容，点击“生成建议”
6. 助手将所有聊天记录和问题作为上下文发给AI，AI返回建议
7. 建议区展示AI回复内容，用户可单击复制、双击粘贴并发送、编辑保存等操作
8. 用户可切换类别、客户，重复上述流程

---

### 3. UI界面草图（结构说明）

```
----------------------------------------------------------
| Tabs: 本地短语 | AI | AI模型 | 本地表情                |
----------------------------------------------------------
| 类别栏: [ 咨询中 ] [ 已成交 ] [ 已结束 ] [ 退款中 ]      |
----------------------------------------------------------
| 左侧弹窗: 客户昵称列表（带模糊搜索）                  |
| [搜索框]                                            |
| 张三                                                |
| 李四                                                |
| 王五                                                |
| ...                                                 |
----------------------------------------------------------
| 聊天记录展示区（自动检索当前客户所有聊天）           |
| [2025-09-21 13:23] 张三: 你好，请问……                 |
| [2025-09-21 13:24] 我: 欢迎咨询                       |
| ...                                                 |
----------------------------------------------------------
| AI编辑区                                            |
| [当前客户: 张三] [当前类别: 咨询中]                   |
| [问题输入框]                                        |
| [生成建议按钮]                                      |
----------------------------------------------------------
| AI建议/回复区（卡片列表，支持复制/粘贴/编辑/保存）   |
----------------------------------------------------------
```

---

## 二、功能合理性与优化建议

- **类别设计**：覆盖业务主流程，支持更多类别后续扩展（如自定义标签/分组）
- **客户列表**：支持模糊搜索，方便海量客户管理
- **聊天记录检索**：自动关联历史+实时消息，保证上下文准确
- **AI上下文构建**：自动拼接所有聊天内容，提升回复准确率
- **建议区操作**：支持多条建议、追问、编辑、保存，提升易用性
- **界面弹窗**：左侧弹窗不遮挡主内容，支持关闭与切换类别

---

## 三、数据库表结构补充

### customers（微信客户表）

| 字段      | 类型       | 说明           |
| --------- | ---------- | -------------- |
| id        | 主键/字符串 | 客户唯一ID     |
| nickname  | 字符串     | 微信昵称       |
| category  | 字符串     | 所属类别       |
| remark    | 字符串     | 备注/标签      |
| avatar    | 字符串     | 头像URL        |

### conversations（会话表）

| 字段         | 类型       | 说明           |
| ------------ | ---------- | -------------- |
| id           | 主键/字符串 | 会话唯一ID     |
| customer_id  | 外键/字符串 | 所属客户ID     |
| started_at   | 时间戳     | 会话开始时间   |
| ended_at     | 时间戳     | 会话结束时间   |
| title        | 字符串     | 会话标题/备注  |

### messages（消息表）

| 字段           | 类型       | 说明                   |
| -------------- | ---------- | ---------------------- |
| id             | 主键/字符串 | 消息唯一ID             |
| conversation_id | 外键/字符串 | 所属会话ID             |
| sender         | 字符串     | 发送方昵称/微信号      |
| sent_at        | 时间戳     | 消息发送时间           |
| type           | 字符串     | 消息类型（文本/图片等）|
| content        | 字符串     | 消息内容               |

---

## 四、后续开发建议

- 客户类别支持动态扩展或自定义
- 客户昵称列表支持分页或异步加载
- 聊天内容展示区支持检索、筛选、导出
- AI上下文长度超限时智能裁剪
- 支持数据加密和隐私保护
- 支持多账号/多模型/多语言扩展

---

## 五、待办事项

- [ ] 设计并实现AI选项卡下类别栏与客户列表弹窗
- [ ] 客户列表模糊搜索功能
- [ ] 聊天记录自动检索与展示
- [ ] AI问答区整合客户上下文
- [ ] AI建议区卡片式展示与操作
- [ ] 数据库表结构优化与接口开发

---

如需进一步原型图、HTML结构样例或前端代码片段，请随时补充说明！