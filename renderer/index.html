<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <title>助手</title>
    <style>
      body {
        margin: 0;
        font-family: system-ui, Arial, sans-serif;
        background: #f5f6f7;
        /* -webkit-user-select: none; */
      }

      .titlebar {
        display: none
      }

      /* 右侧自定义缩放条：可拖动改变宽度 */
      #edge-resizer-right {
        position: fixed;
        top: 0;
        right: 0;
        width: 8px;
        /* 命中区域 */
        height: 100%;
        cursor: ew-resize;
        z-index: 9999;
        background: transparent;
        /* 保持不可见 */
      }
    </style>
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/phrases.css">
    <link rel="stylesheet" href="./css/tabs.css">
    <link rel="stylesheet" href="./css/ai.css">
    <link rel="stylesheet" href="./css/menu.css">
    <link rel="stylesheet" href="./css/aimodels.css">
  </head>
  <body>






    <!-- Tabs content -->
    <div id="phrases-area" class="padding10">
      <div class="tabbar" id="tabbar" role="tablist" aria-label="话术类别">
        <button class="tab-btn active" role="tab" id="tabbtn-corp" aria-controls="tab-corp" aria-selected="true"
          tabindex="0" data-tab="corp">公司话术</button>
        <button class="tab-btn" role="tab" id="tabbtn-group" aria-controls="tab-group" aria-selected="false"
          tabindex="-1" data-tab="group">小组话术</button>
        <button class="tab-btn" role="tab" id="tabbtn-private" aria-controls="tab-private" aria-selected="false"
          tabindex="-1" data-tab="private">私人话术</button>
      </div>

      <div class="tabpanes">
        <!-- 公司话术 -->
        <section class="tabpane active" id="tab-corp" aria-labelledby="tabbtn-corp" aria-hidden="false">
          <div class="phrase-cats" id="phrase-cats-corp"></div>
          <div class="phrase-list" id="phrase-list-corp"></div>
          <div id="corp-unavailable" class="unavailable-msg" style="display:none;">服务端不可用</div>
        </section>
        <!-- 小组话术 -->
        <section class="tabpane" id="tab-group" aria-labelledby="tabbtn-group" aria-hidden="true">
          <div class="phrase-cats" id="phrase-cats-group"></div>
          <div class="phrase-list" id="phrase-list-group"></div>
          <div id="corp-unavailable" class="unavailable-msg" style="display:none;">服务端不可用</div>
        </section>
        <!-- 私人话术 -->
        <section class="tabpane" id="tab-private" aria-labelledby="tabbtn-private" aria-hidden="true">
          <div class="phrase-cats" id="phrase-cats-private"></div>
          <div class="phrase-list" id="phrase-list-private"></div>
          <div id="corp-unavailable" class="unavailable-msg" style="display:none;">服务端不可用</div>
        </section>
      </div>
    </div>
    <!-- 本地短语 -->


    <!-- AI -->
    <div id="ai-area" style="display:none;" class="padding10">
      <section class="tabpane" role="tabpanel" id="tab-ai" aria-labelledby="tabbtn-ai" aria-hidden="true">
        <!-- 类别栏 -->
        <!--   <div class="ai-category-bar" id="ai-category-bar">
          <button class="ai-cat-btn" data-cat="咨询中">咨询中</button>
          <button class="ai-cat-btn" data-cat="已成交">已成交</button>
          <button class="ai-cat-btn" data-cat="已结束">已结束</button>
          <button class="ai-cat-btn" data-cat="退款中">退款中</button>
        </div> -->

        <!-- 客户昵称列表弹窗（默认隐藏，点击类别后出现） -->
        <div class="ai-customer-list-popup" id="ai-customer-list-popup" style="display:none;">
          <input type="text" id="ai-customer-search" placeholder="搜索客户昵称...">
          <ul id="ai-customer-list"></ul>
        </div>

        <!-- 聊天记录展示区 -->
        <div class="ai-chat-history" id="ai-chat-history"></div>

        <!-- AI 问题编辑区 -->
        <div class="ai-input">
          <textarea id="ai-context" placeholder="请输入问题，AI将结合聊天上下文为你答复"></textarea>
          <div class="ai-actions">
            <!-- <button id="resetAreaBtn">重选截图框</button> -->
            <!-- <button id="btn-wechat-ocr">微信截图</button> -->
            <button id="ai-generate">生成建议</button>
          </div>
        </div>

        <!-- AI建议区 -->
        <ul class="ai-suggestions" id="ai-suggestions"></ul>

        <!-- 智能体底部导航栏 -->
        <div class="ai-agent-navbar" id="ai-agent-navbar">
          <button class="ai-agent-selected-btn" id="ai-agent-selected-btn">智能体</button>
          <div class="ai-agent-dropdown" id="ai-agent-dropdown" style="display:none;">
            <ul class="ai-agent-dropdown-list" id="ai-agent-dropdown-list"></ul>
            <button class="ai-agent-add-btn" id="ai-agent-add-btn" title="添加智能体">+</button>
          </div>
        </div>

        <!-- 智能体弹窗（添加/编辑） -->
        <div class="ai-agent-modal" id="ai-agent-modal" style="display:none;">
          <div class="ai-agent-modal-content">
            <h3 id="ai-agent-modal-title">添加智能体</h3>
            <label>名称：<input type="text" id="ai-agent-input-name"></label>
            <label>Token：<input type="text" id="ai-agent-input-token"></label>
            <label>Bot ID：<input type="text" id="ai-agent-input-botid"></label>
            <label>过期时间：
              <input type="date" id="ai-agent-input-expire">
            </label>
            <div class="ai-agent-modal-actions">
              <button id="ai-agent-modal-ok">确定</button>
              <button id="ai-agent-modal-cancel">取消</button>
            </div>
          </div>
        </div>

        <!-- 删除确认弹窗 -->
        <div class="ai-agent-confirm-modal" id="ai-agent-confirm-modal" style="display:none;">
          <div class="ai-agent-modal-content">
            <h3>确定删除该智能体？</h3>
            <div style="margin-top:16px; text-align:right;">
              <button id="ai-agent-confirm-ok">删除</button>
              <button id="ai-agent-confirm-cancel">取消</button>
            </div>
          </div>
        </div>
      </section>
    </div>
    <!-- AI模型（BrowserView 承载） -->
    <div id="models-area" style="display:none;" class="padding10">
      <section class="tabpane" role="tabpanel" id="tab-models" aria-labelledby="tabbtn-models" aria-hidden="true">
        <div class="aimodels">
          <div class="aimodels-tabs" id="aimodels-tabs" role="tablist" aria-label="AI模型站点">
            <button class="aim-tab active" role="tab" aria-selected="true" tabindex="0"
              data-url="https://www.doubao.com/chat/">豆包</button>
          </div>

          <div class="aimodels-actions">
            <button id="aimodels-open-external">在浏览器打开</button>
          </div>

          <div class="aimodels-view">
            <!-- <div id="aimodels-host" class="aimodels-host"></div> -->
            <iframe id="aimodels-fallback" hidden sandbox="allow-scripts allow-same-origin allow-forms allow-popups"
              referrerpolicy="no-referrer"></iframe>
          </div>
          <div class="aimodels-tip" id="aimodels-tip">若网页在本窗口加载异常，可点击“在浏览器打开”。</div>
        </div>
      </section>
    </div>


    <!-- 本地表情 -->
    <!-- 本地表情 -->
    <div id="emojis-area" class="padding10" style="display:none;">
      <div class="tabbar" id="emo-tabbar" role="tablist" aria-label="表情类别">
        <button class="emo-tab-btn active" role="tab" id="emotab-net" aria-controls="emo-tab-net" aria-selected="true"
          tabindex="0" data-tab="net">网络</button>
        <button class="emo-tab-btn" role="tab" id="emotab-corp" aria-controls="emo-tab-corp" aria-selected="false"
          tabindex="-1" data-tab="corp">公司</button>
        <button class="emo-tab-btn" role="tab" id="emotab-group" aria-controls="emo-tab-group" aria-selected="false"
          tabindex="-1" data-tab="group">小组</button>
        <button class="emo-tab-btn" role="tab" id="emotab-private" aria-controls="emo-tab-private" aria-selected="false"
          tabindex="-1" data-tab="private">私人</button>
      </div>

      <div class="tabpanes">
        <!-- 网络 -->
        <!-- 网络tab的类别栏会被JS动态渲染 -->
        <section class="tabpane active" id="emo-tab-net" aria-labelledby="emotab-net" aria-hidden="false">
          <div class="emoji-cats" id="emoji-cats-net"></div>
          <div class="emoji-list media-grid small" id="emoji-list-net"></div>
        </section>
        <!-- 公司 -->
        <section class="tabpane" id="emo-tab-corp" aria-labelledby="emotab-corp" aria-hidden="true">
          <div class="emoji-cats" id="emoji-cats-corp"></div>
          <div class="emoji-list media-grid small" id="emoji-list-corp"></div>
        </section>
        <!-- 小组 -->
        <section class="tabpane" id="emo-tab-group" aria-labelledby="emotab-group" aria-hidden="true">
          <div class="emoji-cats" id="emoji-cats-group"></div>
          <div class="emoji-list media-grid small" id="emoji-list-group"></div>
        </section>
        <!-- 私人 -->
        <section class="tabpane" id="emo-tab-private" aria-labelledby="emotab-private" aria-hidden="true">
          <div class="emoji-cats" id="emoji-cats-private"></div>
          <div class="emoji-list media-grid small" id="emoji-list-private"></div>
        </section>
      </div>
    </div>
    <!-- 固定底部栏 -->
    <div class="fixed-footer-bar">
      <button class="footer-btn"><span class="icon-menu"></span></button>
      <span class="footer-right">
        <span class="vip-badge">VIP</span>
        <span class="footer-text">官网</span>
        <span class="footer-text footer-account" id="footer-account" role="button" title="登录">登录</span>
    </div>

    <!-- 右侧缩放条（不可见，仅用于命中拖动） -->
    <div id="edge-resizer-right" aria-hidden="true"></div>

    <script src="./js/tabs.js"></script>
    <script src="./js/phrases.js"></script>
    <script src="./js/ai.js"></script>
    <script src="./js/aimodels.js"></script>
    <script src="./js/header.js"></script>
    <script src="./js/menu.js"></script>
    <script src="./js/resize.js"></script>
    <script src="./js/ai-dragdrop.js"></script>
    <script src="./js/emojis.js"></script>

    <!-- 新增：通用 API 与 登录逻辑 -->
    <script src="./js/api.js"></script>
    <script src="./js/auth.js"></script>

  </body>
</html>