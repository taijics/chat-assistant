<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <title>助手</title>
    <style>
      body {
        margin: 0;
        font-family: system-ui, Arial, sans-serif;
        background: #f5f6f7;
        -webkit-user-select: none;
        -webkit-app-region: no-drag; /* 确保内容区不阻挡缩放/点击 */
      }
      .titlebar { display: none }

      /* 右侧自定义缩放条：可拖动改变宽度 */
      #edge-resizer-right {
        position: fixed;
        top: 0;
        right: 0;
        width: 8px;
        height: 100%;
        cursor: ew-resize;
        -webkit-app-region: no-drag;
        z-index: 9999;
        /* 可选：半透明命中区，视觉上保持简洁 */
        background: transparent;
      }
    </style>
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/phrases.css">
    <link rel="stylesheet" href="./css/tabs.css">
    <link rel="stylesheet" href="./css/aimodels.css">
  </head>
  <body>
    <div class="app-titlebar">
      <div class="title">微信助手</div>
      <div class="spacer"></div>
      <div class="btn" id="btn-settings" title="设置">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M12 8.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Z" stroke="currentColor" stroke-width="1.7" />
          <path d="M19 12a7 7 0 0 0-.06-.9l1.94-1.5-1.9-3.29-2.27.92a7.08 7.08 0 0 0-1.56-.9L14.7 3h-5.4l-.45 2.33a7.08 7.08 0 0 0-1.56.9l-2.27-.92-1.9 3.29 1.94 1.5c.04-.3.06-.6.06-.9Z" stroke="currentColor" stroke-width="1.7" />
        </svg>
      </div>
      <div class="btn" id="btn-minimize" title="最小化">
        <svg width="14" height="14" viewBox="0 0 16 16" fill="none">
          <rect x="3" y="7.5" width="10" height="1.8" fill="currentColor" />
        </svg>
      </div>
      <div class="btn" id="btn-exit" title="退出">
        <svg width="14" height="14" viewBox="0 0 16 16" fill="none">
          <path d="M3.5 3.5l9 9m0-9l-9 9" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
        </svg>
      </div>
    </div>

    <!-- Tabs bar -->
    <div class="tabbar" id="tabbar" role="tablist" aria-label="主功能选项卡">
      <button class="tab-btn active" role="tab" id="tabbtn-phrases" aria-controls="tab-phrases" aria-selected="true" tabindex="0" data-tab="phrases">本地短语</button>
      <button class="tab-btn" role="tab" id="tabbtn-ai" aria-controls="tab-ai" aria-selected="false" tabindex="-1" data-tab="ai">AI</button>
      <button class="tab-btn" role="tab" id="tabbtn-models" aria-controls="tab-models" aria-selected="false" tabindex="-1" data-tab="models">AI模型</button>
      <button class="tab-btn" role="tab" id="tabbtn-emojis" aria-controls="tab-emojis" aria-selected="false" tabindex="-1" data-tab="emojis">本地表情</button>
    </div>

    <!-- Tabs content -->
    <div class="tabpanes">
      <!-- 本地短语 -->
      <section class="tabpane active" role="tabpanel" id="tab-phrases" aria-labelledby="tabbtn-phrases" aria-hidden="false">
        <div class="phrase-cats" id="phrase-cats"></div>
        <div class="phrase-list" id="phrase-list"></div>
      </section>

      <!-- AI -->
      <section class="tabpane" role="tabpanel" id="tab-ai" aria-labelledby="tabbtn-ai" aria-hidden="true">
        <div class="ai-input">
          <textarea id="ai-context" placeholder="粘贴/输入上下文，点击‘生成建议’"></textarea>
          <div class="ai-actions">
            <button id="ai-generate">生成建议</button>
          </div>
        </div>
        <ul class="ai-suggestions" id="ai-suggestions"></ul>
      </section>

      <!-- AI模型（BrowserView 承载） -->
      <section class="tabpane" role="tabpanel" id="tab-models" aria-labelledby="tabbtn-models" aria-hidden="true">
        <div class="aimodels">
          <div class="aimodels-tabs" id="aimodels-tabs" role="tablist" aria-label="AI模型站点">
            <button class="aim-tab active" role="tab" aria-selected="true" tabindex="0" data-url="https://www.doubao.com/chat/">豆包</button>
            <button class="aim-tab" role="tab" aria-selected="false" tabindex="-1" data-url="https://chatgpt.com/?hints=moonshine">ChatGPT</button>
            <button class="aim-tab" role="tab" aria-selected="false" tabindex="-1" data-url="https://chat.deepseek.com/">DeepSeek</button>
            <button class="aim-tab" role="tab" aria-selected="false" tabindex="-1" data-url="https://www.tongyi.com/qianwen">通义千问</button>
          </div>

          <div class="aimodels-actions">
            <button id="aimodels-open-external">在浏览器打开</button>
          </div>

          <div class="aimodels-view">
            <div id="aimodels-host" class="aimodels-host"></div>
            <iframe id="aimodels-fallback" hidden sandbox="allow-scripts allow-same-origin allow-forms allow-popups" referrerpolicy="no-referrer"></iframe>
          </div>
          <div class="aimodels-tip" id="aimodels-tip">若网页在本窗口加载异常，可点击“在浏览器打开”。</div>
        </div>
      </section>

      <!-- 本地表情 -->
      <section class="tabpane" role="tabpanel" id="tab-emojis" aria-labelledby="tabbtn-emojis" aria-hidden="true">
        <div class="media-toolbar">
          <button id="emo-pick">选择表情文件夹</button>
          <span class="media-folder" id="emo-folder"></span>
        </div>
        <div class="media-grid small" id="emo-grid"></div>
      </section>
    </div>

    <div class="app-menu" id="app-menu">
      <ul>
        <li data-action="new">新建聊天</li>
        <li data-action="history">历史</li>
        <li id="menu-pin" data-action="pin">置顶</li>
        <li class="divider"></li>
        <li data-action="screenshot">截图</li>
        <li data-action="search">搜索</li>
        <li data-action="clear">清空</li>
        <li data-action="export">导出</li>
        <li class="divider"></li>
        <li data-action="settings">设置</li>
        <li data-action="about">关于</li>
        <li class="divider"></li>
        <li data-action="minimize">最小化</li>
        <li data-action="exit">退出</li>
      </ul>
    </div>

    <div class="app-content">
      <!-- 你的内容区域 -->
    </div>

    <!-- 右侧缩放条（不可见，仅用于命中拖动） -->
    <div id="edge-resizer-right" aria-hidden="true"></div>

    <script src="./js/tabs.js"></script>
    <script src="./js/aimodels.js"></script>
    <script src="./js/ai.js"></script>
    <script src="./js/phrases.js"></script>
    <script src="./js/header.js"></script>
    <script src="./js/resize.js"></script>
  </body>
</html>